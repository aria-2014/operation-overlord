<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>NCIRL</title>

    <link href="../../Content/jquery-ui-1.8.23.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript" src="../../Scripts/jquery-1.10.2.min.js"></script>
    <script>        !window.jQuery && document.write('<script src="Scripts/jquery-1.8.0.min.js"><\/script>')</script>
    <script type="text/javascript" src="../../Scripts/jquery-ui-1.8.23.min.js"></script>
    <script type="text/javascript" src="../../Scripts/_skel_config.js"></script>
    <script type="text/javascript" src="../../Scripts/skel.min.js"></script>

    <style type="text/css">
        #map_canvas {
            width: 400px;
            height: 300px;
        }
        .contextmenu {
            visibility: hidden;
            background: #ffffff;
            border: 1px solid #8888FF;
            z-index: 10;
            position: relative;
            width: 140px;
        }
        .contextmenu div {
            padding-left: 5px;
        }
        #div1 {
            width: 350px;
            height: 70px;
            padding: 10px;
            border: 1px solid #aaaaaa;
        }

    </style>

    <script type="text/javascript">
        //Drag and drop script
        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drag(ev) {
            ev.dataTransfer.setData("Text", ev.target.id);
        }

        function drop(ev) {
            ev.preventDefault();
            var data = ev.dataTransfer.getData("Text");
            ev.target.appendChild(document.getElementById(data));
        }
        //End Drag and drop 
    </script>



    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
        //Google Map stuff
        var map;
        function initialize() {
            var latlng = new google.maps.LatLng(49.814357, 19.025956);
            var myOptions = {
                zoom: 12,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
            google.maps.event.addListener(map, "rightclick", function (event) { showContextMenu(event.latLng); });

        }
        function getCanvasXY(caurrentLatLng) {
            var scale = Math.pow(2, map.getZoom());
            var nw = new google.maps.LatLng(
                map.getBounds().getNorthEast().lat(),
                map.getBounds().getSouthWest().lng()
            );
            var worldCoordinateNW = map.getProjection().fromLatLngToPoint(nw);
            var worldCoordinate = map.getProjection().fromLatLngToPoint(caurrentLatLng);
            var caurrentLatLngOffset = new google.maps.Point(
                Math.floor((worldCoordinate.x - worldCoordinateNW.x) * scale),
                Math.floor((worldCoordinate.y - worldCoordinateNW.y) * scale)
            );
            return caurrentLatLngOffset;
        }
        function setMenuXY(caurrentLatLng) {
            var mapWidth = $('#map_canvas').width();
            var mapHeight = $('#map_canvas').height();
            var menuWidth = $('.contextmenu').width();
            var menuHeight = $('.contextmenu').height();
            var clickedPosition = getCanvasXY(caurrentLatLng);
            var x = clickedPosition.x;
            var y = clickedPosition.y;

            if ((mapWidth - x) < menuWidth)
                x = x - menuWidth;
            if ((mapHeight - y) < menuHeight)
                y = y - menuHeight;

            $('.contextmenu').css('left', x);
            $('.contextmenu').css('top', y);
        };
        function showContextMenu(caurrentLatLng) {
            var projection;
            var contextmenuDir;
            projection = map.getProjection();
            $('.contextmenu').remove();
            contextmenuDir = document.createElement("div");
            contextmenuDir.className = 'contextmenu';
            //contextmenuDir.innerHTML = "<a href='#a' id='drag1' draggable='true' ondragstart='drag(event)'><div class=context>menu item 1<\/div><\/a><a href='#b' id='drag2' draggable='true' ondragstart='drag(event)'><div class=context>menu item 2<\/div><\/a>";
            contextmenuDir.innerHTML = "\
<img id='drag1' src='../../../../../../../basket.jpg' draggable='true' ondragstart='drag(event)' width='30' height='30'>\
<img id='drag2' src='../../../../../../../basket.jpg' draggable='true' ondragstart='drag(event)' width='30' height='30'>\
<img id='drag3' src='../../../../../../../basket.jpg' draggable='true' ondragstart='drag(event)' width='30' height='30'>";
            $(map.getDiv()).append(contextmenuDir);

            setMenuXY(caurrentLatLng);

            contextmenuDir.style.visibility = "visible";
        }
        $(document).ready(function () {
            initialize();

        });
    </script>

    <script type="text/javascript" charset="utf-8" src="../../Scripts/ARIA002.js"></script>

</head>
<body>
    <div class="container">
        <!-- Header -->
        <div id="header" class="row">
            <div class="4u">
                <h1>NCIRL </h1>
                <nav>
                    <a href="#welcome">Welcome</a>
                    <a href="#locations" id="locats">Locations</a>
                    <a href="#products" id="prods">Products</a>
                    <a href="#contact">Contact</a>
                    <a href="#about">About</a>
                </nav>
            </div>
        </div>
        <!-- Hero -- >
                        <section id="hero">
        https://developers.google.com/maps/documentation/javascript/controls?csw=1#CustomControls

                        </section>
                    <! -- Features -->
        <div class="row">

            <div class="12u">
                <section id="welcome">
                    <header>
                        <h2>Welcome</h2>
                    </header>
                    <p>The welcome section</p>
                </section>
                <div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)">The Basket</div>
                <section id="locations">
                    <header>
                        <h2>Locations Cart v2   </h2>
                    </header>
                    <div class="formDiv" id="map_canvas"></div>
                </section>

                <section id="products">
                    <header>
                        <h2>Products</h2>
                    </header>
                    <div id="divResults"></div>
                </section>

                <section id="contact">
                    <header>
                        <h2>Contact</h2>
                    </header>
                    <p>The contact section</p>
                </section>

                <section id="about">
                    <header>
                        <h2>About</h2>
                    </header>
                    <p>The about section</p>
                </section>

            </div>
            <div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
            <br>
            <img id="drag1" src="../../../../../../../basket.jpg" draggable="true" ondragstart="drag(event)" width="30" height="30">
            <!--
            <div class="-2u 4u">
            </div>

            <div class="-2u 4u">
            </div>

            <div class="-2u 4u">
            </div>
            -->

        </div>

        <!-- Footer -->
        <div id="footer">
            <p>&copy; 2014 NCIRL</p>
        </div>

    </div>
</body>
</html>
